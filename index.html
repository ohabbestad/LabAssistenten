<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab-assistenten</title>

    <script src="https://kit.fontawesome.com/207e147084.js" crossorigin="anonymous"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="p-8">
    <div id="main-container" class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-8">

        <div id="loading-view" class="text-center p-12">
            <h1 class="text-3xl font-bold mb-4 text-gray-800">Lastar data...</h1>
            <div class="animate-pulse text-xl text-blue-500">Vent eitt lite augneblikk.</div>
        </div>

        <div id="heim-view" class="active-view">
            <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">Velkommen til Lab-assistenten</h1>
            <p class="text-center text-lg mb-8 text-gray-600">Velg eit forsøk du vil starte:</p>
            <div id="eksperiment-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                <p>Noko gjekk gale</p>
            </div>
        </div>

        <div id="oversikt-view" class="hidden">
            <h1 id="eksperiment-tittel" class="text-3xl font-bold mb-4 text-gray-800"></h1>
            
            <button id="les-opp-oversikt-btn" class="my-3 bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-blue-600 transition-colors duration-300">
                <i class="fa-brands fa-readme"></i> Les opp tekst
            </button>

            <img id="eksperiment-bilde" class="w-full max-w-md mx-auto rounded-lg shadow-md mb-6" src="" alt="Eksperimentbilde">

            <p id="eksperiment-skildring" class="text-lg text-gray-600 mb-6"></p>
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Utstyr</h2>
            <ul id="utstyrsliste" class="list-disc list-inside space-y-1 text-gray-700"></ul>

            <h2 class="text-2xl font-semibold mt-8 mb-4 text-gray-800">Mål</h2>
            <ul id="maal-liste" class="list-disc list-inside space-y-1 text-gray-700"></ul>


            <div class="text-right">
                <button id="start-eksperiment-btn" class="mt-8 ml-4 bg-blue-600 text-white font-semibold py-2 px-6 rounded-md shadow-lg hover:bg-blue-700 transition-colors duration-300">
                    <i class="fa-regular fa-circle-play"></i> Start forsøket
                </button>
            </div>

            <div class="text-center mt-6">
                <button id="heim-btn" class="text-center bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-md shadow-lg hover:bg-gray-500 transition-colors duration-300">
                    <i class="fa-regular fa-house"></i> Avbryt og gå til startsida
                </button>
            </div>
            
        </div>

        <div id="steg-view" class="hidden">
            <div id="step-content" class="mb-6">
                <h2 id="step-tittel" class="text-2xl font-semibold mb-2 text-gray-800"></h2>
                
                <button id="les-opp-btn" class="my-3 bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-blue-600 transition-colors duration-300">
                    <i class="fa-brands fa-readme"></i> Les opp tekst
                </button>

                <div id="step-media" class="mb-4"></div>

                <p id="step-text" class="text-lg text-gray-700 mb-4"></p>
                
                <div id="step-question-container" class="mt-6 p-4 border border-gray-300 rounded-md bg-gray-50">
                    <p id="step-question" class="font-medium text-gray-800 mb-2"></p>
                    <textarea id="steg-svar" class="w-full h-24 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
            </div>
            <div class="flex">
                <div class="w-1/2 text-left">
                    <button id="forrige-steg-btn" class="bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-gray-500 transition-colors duration-300">
                        <i class="fa-solid fa-arrow-left"></i> Forrige
                    </button>
                </div>
                <div class="w-1/2 text-right">
                    <button id="neste-steg-btn" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-blue-700 transition-colors duration-300">
                        <i class="fa-solid fa-arrow-right"></i> Neste
                    </button>
                </div>
            </div>

            
            <div class="text-center mt-6">
                <button id="steg-til-heim-btn" class="bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-gray-500 transition-colors duration-300">
                    <i class="fa-regular fa-house"></i> Avbryt og gå til startsida
                </button>
            </div>

        </div>

        <div id="rapport-view" class="hidden">
            <h1 class="text-3xl font-bold mb-4 text-gray-800">Lab-rapport</h1>

            <p class="text-gray-600 mb-6">Her er svara dine. Du kan kopiere teksten og bruke den som utgangspunkt for rapporten din.</p>
            
            <button id="les-opp-rapport-btn" class="my-3 bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-blue-600 transition-colors duration-300">
                <i class="fa-brands fa-readme"></i> Les opp rapport
            </button>
            
            <div id="rapport-text-container" class="bg-gray-100 p-6 rounded-lg shadow-inner">
                <pre id="rapport-text" class="whitespace-pre-wrap text-gray-800 font-mono text-sm"></pre>
            </div>
            <div class="flex">
                <div class="w-1/2 text-left">
                    <button id="rapport-til-steg-btn" class="bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-gray-500 transition-colors duration-300">
                        <i class="fa-solid fa-arrow-left"></i> Forrige
                    </button>
                </div>
                <div class="w-1/2 text-right">
                    <button id="kopier-rapport-btn" class="mt-6 bg-green-600 text-white font-semibold py-2 px-6 rounded-md shadow-lg hover:bg-green-700 transition-colors duration-300">
                        <i class="fa-regular fa-copy"></i> Kopier rapport
                    </button>
                </div>
            </div>
            <div class="text-center mt-6">
                <button id="rapport-til-heim-btn" class="bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-md shadow-lg hover:bg-gray-500 transition-colors duration-300">
                    <i class="fa-regular fa-house"></i> Avbryt og gå til startsida
                </button>
            </div>
        </div>

    </div>

    <script>
        let eksperiment = {};
        
        const loadingView = document.getElementById('loading-view');

        function loadAppScript() {
            const script = document.createElement('script');
            script.src = 'app.js';
            document.body.appendChild(script);
        }

        document.addEventListener ('DOMContentLoaded', () => { 
            
            loadingView.classList.remove('hidden');

            fetch('eksperiment.json')
            .then(response => response.json())
            .then(data => {
                eksperiment = data;
                loadAppScript();
            })
            .catch(error => {
                console.error('Klarte ikkje å laste eksperiment:', error);
            });
        });
    </script>
</body>
</html>